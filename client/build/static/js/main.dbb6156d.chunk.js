(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{14:function(e,t,a){},15:function(e,t,a){},18:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),s=a(8),i=a.n(s),c=(a(14),a(2)),o=a(3),l=a(5),d=a(4),u=(a(15),"december-2015"),h="selected-year",p=a(0),m=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).handleModeChange=function(t){e.setState({mode:t.currentTarget.value},e.doParentCallback)},e.handleYearChange=function(t){var a=""===t.target.value?null:Number(t.target.value);e.setState({year:a},e.doParentCallback)},e.doParentCallback=function(){var t={mode:e.state.mode,year:e.state.year};if(t.mode){if(t.mode===u)delete t.year;else if(!e.state.year)return;e.props.parentCallback(t)}},e.state={mode:null,year:(new Date).getFullYear()},e}return Object(o.a)(a,[{key:"clear",value:function(){console.log("clearing it"),this.setState({mode:void 0})}},{key:"render",value:function(){return Object(p.jsxs)("div",{className:"mode-selector",children:["Choose an option below to show",Object(p.jsxs)("label",{children:[Object(p.jsx)("input",{type:"radio",value:u,name:"mode",checked:this.state.mode===u,onChange:this.handleModeChange}),"the asteroid that passed the closest to Earth between December 19 and December 26 year 2015"]}),Object(p.jsxs)("label",{children:[Object(p.jsx)("input",{type:"radio",value:h,name:"mode",checked:this.state.mode===h,onChange:this.handleModeChange}),"the largest asteroid for year",Object(p.jsx)("input",{type:"number",value:this.state.year,onChange:this.handleYearChange,disabled:this.state.mode!==h})]})]})}}]),a}(n.Component),b=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"formatNumber",value:function(e){return String(e).replaceAll(/^(\d*\.\d{2}).*$/g,"$1")}},{key:"render",value:function(){return Object(p.jsxs)("div",{className:"display",children:[this.props.loading&&Object(p.jsx)("span",{class:"loader",children:"Loading"}),this.props.data&&!this.props.loading&&Object(p.jsx)("a",{href:this.props.data.url,children:this.props.data.name}),this.props.data&&this.props.data.approachDistance&&Object(p.jsxs)("span",{children:["Closest approach ",this.formatNumber(this.props.data.approachDistance),"km on ",this.props.data.approachDate]}),this.props.data&&this.props.data.diameterMin&&Object(p.jsxs)("span",{children:["Estimated diameter ",this.formatNumber(this.props.data.diameterMin),"m \u2014 ",this.formatNumber(this.props.data.diameterMax),"m"]})]})}}]),a}(n.Component),f=b,j=a(7),g=a.n(j),O=a(9);function v(e,t){switch(e){case u:return"/api/2015-12-19/2015-12-26";case h:return"/api/".concat(t);default:return"/api/ping"}}var y=function e(){Object(c.a)(this,e)};y.fetch=function(){var e=Object(O.a)(g.a.mark((function e(t,a){var n,r,s;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=v(t,a),e.next=3,fetch(n);case 3:if(202!==(r=e.sent).status){e.next=6;break}return e.abrupt("return",null);case 6:return e.next=8,r.json();case 8:if(s=e.sent,200===r.status){e.next=11;break}throw Error(s.message);case 11:return e.abrupt("return",s);case 12:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();var C=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).timeoutIdApi=null,n.handleModeChange=function(e){n.scheduleAPICall(e,300)},n.scheduleAPICall=function(e,t){n.timeoutIdApi&&(n.timeoutIdApi=clearTimeout(n.timeoutIdApi)),n.timeoutIdApi=setTimeout((function(){n.callAPI(e)}),t)},n.callAPI=function(e){n.setState({mode:e.mode,loading:!0,data:null}),y.fetch(e.mode,e.year).then((function(t){if(null===t)return n.scheduleAPICall(e,3e3);n.setState({loading:!1,data:n.makeDisplayData(e.mode,t)})})).catch((function(e){n.setState({loading:!1,data:null,mode:null}),n.modeSelector.current.clear(),console.error(e)}))},n.state={},n.modeSelector=r.a.createRef(),n}return Object(o.a)(a,[{key:"makeDisplayData",value:function(e,t){var a={name:t.name,url:t.nasa_jpl_url};return e===u&&(a.approachDistance=t.close_approach_data[0].miss_distance.kilometers,a.approachDate=t.close_approach_data[0].close_approach_date),e===h&&(a.diameterMin=t.estimated_diameter.meters.estimated_diameter_min,a.diameterMax=t.estimated_diameter.meters.estimated_diameter_max),a}},{key:"render",value:function(){return Object(p.jsxs)("div",{className:"App",children:[Object(p.jsx)("header",{className:"App-header",children:Object(p.jsx)("h1",{className:"App-title",children:"Test assignment for New Things Co | Valentyn Derkach"})}),Object(p.jsx)(m,{parentCallback:this.handleModeChange,ref:this.modeSelector}),Object(p.jsx)(f,{loading:this.state.loading,data:this.state.data})]})}}]),a}(n.Component),x=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,19)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,s=t.getLCP,i=t.getTTFB;a(e),n(e),r(e),s(e),i(e)}))};i.a.render(Object(p.jsx)(r.a.StrictMode,{children:Object(p.jsx)(C,{})}),document.getElementById("root")),x()}},[[18,1,2]]]);
//# sourceMappingURL=main.dbb6156d.chunk.js.map